version: "3.3"
services:
  frontend:
    container_name: ${COMPOSE_PROJECT_NAME}-frontend
    build:
      context: ./frontend
      dockerfile: Dockerfile.prod
    restart: unless-stopped

    ports:
      - ${FRONTEND_PORT}:80

    env_file:
      - ./.env.production
      - ./frontend/.env.production

  backend:
    container_name: ${COMPOSE_PROJECT_NAME}-backend
    build:
      context: ./backend
      dockerfile: Dockerfile.prod
    restart: unless-stopped

    env_file:
      - ./.env.production
      - ./backend/.env.production

  mongodb:
    restart: unless-stopped

    env_file:
      - ./.env.production

networks:
  soffacto-net:
